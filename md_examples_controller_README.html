<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <meta name="generator" content="Doxygen 1.8.4"/>
        <title>libfluid: Example controller implementations</title>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-48360026-1', 'opennetworkingfoundation.github.io');
          ga('send', 'pageview');
        </script>
        <link href="tabs.css" rel="stylesheet" type="text/css"/>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="extra.css" rel="stylesheet" type="text/css"/>
        <link rel="icon" type="image/png" href="libfluid_favicon.png">        
    </head>
<body>
    <div id="top">
        <div id="titlearea">
            <a href="http://opennetworkingfoundation.github.io/libfluid/">
            <div id="projectlogo"><img alt="Logo" src="libfluid_logo.png"></div>
            <div id="projecttitle">
                <div id="projectname">libfluid</div>
                <div id="projectbrief">The ONF OpenFlow driver</div>
            </div>
            </a>
            <div id="resources">GitHub:
                <a href="https://github.com/OpenNetworkingFoundation/libfluid">libfluid</a> | 
                <a href="https://github.com/OpenNetworkingFoundation/libfluid_base">libfluid_base</a> | 
                <a href="https://github.com/OpenNetworkingFoundation/libfluid_msg">libfluid_msg</a><br />
                <a href="https://groups.google.com/forum/#!forum/libfluid">Mailing list</a>
            </div>
        </div>
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="pages.html"><span>Documentation</span></a></li>
      <li><a href="annotated.html"><span>API&#160;reference</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Example controller implementations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is an implementation of a very simple OpenFlow controller using <b>libfluid</b>. It builds on top of <code><a class="el" href="classfluid__base_1_1OFServer.html">fluid_base::OFServer</a></code> to provide controller-like functionalities (it needs a lot more work to become a real controller).</p>
<p>Note that these controllers will run each event to completion. That is: once a message arrives, its response will be created and sent during the callback execution. This means other connections running in the same thread will have to wait. This provides a general use case that is fine for an example and good for general use and benchmarking. When designing a real controller, make sure that long operations don't block the callbacks, and be aware of the guidelines in the API documentation (see <a class="el" href="classfluid__base_1_1OFServer.html#aadcb813c61a541f41450fea51f97690e">fluid_base::OFServer::message_callback</a>).</p>
<p>Four controller variations are available:</p>
<ul>
<li><b>raw</b>: OpenFlow 1.0 learning switch (<code>l2</code>) and <code>cbench</code> fast reply applications that build the messages on their own, using raw OpenFlow structs.</li>
<li><b>secure</b>: uses the <b>raw</b> learning switch application and provides an example of a controller that deals with secure and non-secure connections in different ports at the same time. It has been tested with Open vSwitch.</li>
<li><b>msg</b>: an implementation showcasing <b>libfluid_msg</b>. It provides a <code>cbench</code> fast reply application and a learning switch that works simultaneously with OpenFlow 1.0 and 1.3 switches (<code>l2</code>).</li>
<li><b>loci</b>: based on the <b>raw</b> learning switch application, but using LOCI for message generation. To make it compile and work, move the LOCI generated sources (<code>loxi_output/loci</code>) to a folder named <b>loci</b>.</li>
</ul>
<blockquote class="doxtable">
<p>These examples use the new, IANA-defined OpenFlow port: <b>6653</b> instead of the previous, non-standard default (6633).</p>
<p></p>
</blockquote>
<blockquote class="doxtable">
<p>Note that two applications are available for the <b>raw</b> and <b>msg</b> controllers. You should indicate which one you want (<code>l2</code> or <code>cbench</code>).</p>
<p></p>
</blockquote>
<p>To build and run any of the variations: </p>
<div class="fragment"><div class="line">$ make controller</div>
<div class="line">$ make raw_controller</div>
<div class="line">$ make secure_controller</div>
<div class="line">$ make loci_controller</div>
<div class="line"></div>
<div class="line">$ ./controller l2</div>
<div class="line">$ ./raw_controller l2</div>
<div class="line">$ ./secure_controller</div>
<div class="line">$ ./loci_controller</div>
</div><!-- fragment --><p>After you start the controller, point your switches to it. You can use Mininet or OpenFlow switches to test functionality.</p>
<blockquote class="doxtable">
<p>The learning switch flows last for only 10 seconds (5 if idle) to make tests more interesting.</p>
<p></p>
</blockquote>
<p>In order to test and compare performance, you can use <code>cbench</code>: </p>
<div class="fragment"><div class="line">$ cbench -c localhost -p 6653 -m 1000 -l 10 -s 16 -M 1000000 -t</div>
</div><!-- fragment --><p>To see how fast <b>libfluid</b> can go, run the <b>raw</b> controller with the <code>cbench</code> fast reply application. It replies to packet-in messages with dummy flow mod messages in order to measure IO alone. Linking with TCMalloc further improves performance.</p>
<p>To make a fairer comparison with other controllers running a learning switch application, run the <b>msg</b> controller with the <code>l2</code> app. This adds the overhead for message creation and parsing, as well as hash map lookup. Similar applications are built into pretty much every OpenFlow controller. </p>
</div></div><!-- contents -->
<script type="text/javascript">
$("table.directory td.desc").remove();
</script>
